---
title: "Recommended Workflow and Examples"
author: "Vilmantas Gegzna"
date: "`r Sys.Date()`"
output:
    rmarkdown::html_vignette:
        toc: yes
vignette: >
  %\VignetteIndexEntry{1 Workflow and Examples}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


This vignette introduces to package `spAddins`, describes a recommended 
workflow and how the functions of the package should be used and gives several examples.

About The Package
==================

`spAddins` is an R package that provides a set of RStudio addins which
are designed to be used in
combination with user-defined RStudio keyboard shortcuts. These
addins either:

1) **insert** text at the cursor position (e.g. insert
operators `%>%`, `<<-`, `%$%`, etc.), 
2) **replace** symbols in selected
pieces of text (e.g., convert backslashes to forward slashes which results 
in strings like `"c:\data\"` converted into `"c:/data/"`) or 
3) **enclose** text with special symbols (e.g., converts "bold" into "\*\*bold\*\*"
that is interpreted as "**bold**")
which is convenient for editing R Markdown files.



The Workflow
=============
The recommended workflow consists of four main steps.
Step 1 and Step 2 should usually be done only once.
Step 3 and Step 4 can be repeated as many times as needed.


Step 1: Install the package
---------------------------

Released version of package `spAddins` can be installed from CRAN:
```{r Install package from CRAN, eval=FALSE}
install.packages("spAddins")
```

Development version can be installed from GitHub:
```{r Install package from GitHub, eval=FALSE}
if (!require(devtools)) install.packages("devtools")
library(devtools)
install_github("GegznaV/spAddins")
```


Step 2: Define keyboard shortcuts
-----------------------------------

Functions in the package are also RStudio addins. This fact allows setting 
user-defined RStudio keyboard shortcuts that call the functions in a more 
convenient way.
Thus the second step is to define keyboard shortcuts for package's `spAddins` 
functions of interest.

To learn how to add user defined RStudio keyboard shortcuts, visit these links:
[Keyboard Shorcuts](https://rstudio.github.io/rstudioaddins/#keyboard-shorcuts)
and
[Customizing Keyboard Shortcuts](https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts).


Step 3: Place a cursor / Select some text
------------------------------------------
Package `spAddins` contains 3 types of addins:

- those which **insert** text;
- those which **replace** text;
- those which **enclose** text (insert symbols on both sides of selected text).

For addins which **insert** text, in either R editor or in R console **place** your 
cursor at the position at which the text should be inserted.  

For addins which either **replace** or **enclose** text, in R editor or in
R console **select** a piece of text in which certain symbols should be replaced or enclosed.  

 
Step 4: Use the keyboard shortcuts
----------------------------------
To call a desired addin function, apply an appropriate keyboard shortcut which 
in Step 2 was associated with that function.


A Few Examples
===============

Insert `%>%` operator
-----------------------
This example demonstrates how to use addins which **insert** text.  

Let package `spAddins` be already installed. First, let's set keyboard shortcut
`Ctrl + Alt + .` to call function `insertPipeline_Addin()` which inserts
forward-pipe operator `%>%` operator at the cursor position. This operator is 
in package `magrittr` thus the package must be loaded: 
```{r, eval = FALSE}
library(magrittr)
```
To learn more about the `%>%` operator type:
```{r, eval = FALSE}
?`%>%`
```

Next, place your cursor at the position, where the operator should be inserted. 
For example, between the name of data set `iris` and the name of a function 
`head()`:
```{r, eval = FALSE}
iris  head()
```

Apply the shortcut combination `Ctrl + Alt + .` As a result the operator 
is inserted:

```{r, eval = FALSE}
iris %>% head()
```


Replace `\` with `/`
----------------------
This example describes how to use addins which **replace** text.  

Conciser having a string `"c:\data\"` in which backslashes (`\`) must be 
replaced with forward slashes (`/`). Addin function `Back2ForwardSlash()` 
is designed exactly for this task. Let's define a new shortcut combination,
say  `Ctrl + Alt + Shift + /`, which calls the addin function. Now to know the
place where the replacement should be applied an appropriate piece of text in
either R editor or R console must be selected. Thus let's select 
whole string `"c:\data\"` and push `Ctrl + Alt + Shift + /`. 
The result: as expected, the string is converted into `"c:/data/"`.


Enclose with `**`...`**`
----------------------
This example describes how to use addins which **enclose** text.  

Conciser having an [R Markdown](http://rmarkdown.rstudio.com/) file and a string `"This word should be in bold."` in it. In this string word `word` must be in bold. 
Addin function `enclose_with_asterisk2()` encloses selected text in double asterisk `**` signs, and this is interpreted as bold in R markdown. Let's define shortcut combination,
say  `Ctrl + Shift + B`, which calls the addin function. Now select the word `word`
which is either in R editor or R console and push `Ctrl + Shift + B` to call the addin function.
The result: `"This **word** should be in bold."`


Available add-in functions 
==========================

## "Insert" family

These functions insert various R operators.

| Function                            | Inserts              | Package associated with operator|
|-------------------------------------|:--------------------:|:-------------------------------:|
| insertArrowLR2\_Addin()             | &lt;&lt;-            | R base                          |
| insertArrowRL\_Addin()              | -&gt;                | R base                          |
| insertArrowRL2\_Addin()             | -&gt;&gt;            | R base                          |
| insertIn\_Addin()                   | %in%                 | R base                          |
| insertMatMuliplication\_Addin()     | %\*%                 | R base                          |
| insertPipeline\_Addin()             | %&gt;%               | magrittr                        |
| insertTeeOperator\_Addin()          | %T&gt;%              | magrittr                        |
| insertCompAssignPipe\_Addin()       | %&lt;&gt;%           | magrittr                        |
| insertExPipe\_Addin()               | %$%                  | magrittr                        |
| insertIfNULL\_Addin()               | %if.NULL%            | spMisc[^1]                      |
| insert\_if\_null\_Addin()           | %if\_null%           | spMisc                          |
| insert\_if\_null\_or\_len0\_Addin() | %if\_null\_or\_len0% | spMisc                          |
| insertNotIn\_Addin()                | %!in%                | spMisc                          |
| insertPaste\_Addin()                | %.+.%                | spMisc                          |
| insertPaste0\_Addin()               | %++%                 | spMisc                          |

The following functions may be useful for editing **R Markdown** files or,
if commented (`#`), for structuring R code files.

| Function                            | Description                      | Example (first 10 symbols) |
|-------------------------------------|:--------------------------------:|:--------------------------:|
| insert\_ss\_line\_Addin()           | Insert single straight (SS) line | `----------`               |
| insert\_ds\_line\_Addin()           | Insert double straight (DS) line | `==========`               |
| insert\_sw\_line\_Addin()           | Insert single wavy (SW) line     | `~~~~~~~~~~`               |                   |

[^1]: Available at <https://github.com/GegznaV/spMisc>.

## "Replace" family 

| Action                        | Function               | Text to edit     | Result          |
|-------------------------------|------------------------|:----------------:|:---------------:|
| Replace \`\\\` with \` \\\\\` | Back2doubleBackSlash() | c:\\data\\       | c:\\\\data\\\\  |
| Replace \`\\\` with \` /\`    | Back2ForwardSlash()    | c:\\data\\       | c:/data/        |


## "Enclose" family

These functions are useful for editing **R Markdown** files.

| Action                                 | Function                     | Text to edit      | Result                     | Interpreted in markdown as     |
|----------------------------------------|------------------------------|:-----------------:|:--------------------------:|:------------------:|
| Enclose with single asterisk (`*`)     | enclose\_with\_asterisk()    | italics           | \*italics\*                | *italics*          |
| Enclose with single underscore (`_`)   | enclose\_with\_underscore()  | italics           | \_italics\_                | _italics_          |
| Enclose with double asterisk (`**`)    | enclose\_with\_asterisk2()   | bold              | \*\*bold\*\*               | **bold**           |
| Enclose with double underscore (`__`)  | enclose\_with\_underscore2() | bold              | \_\_bold\_\_               | __bold__           |
| Enclose with single back tick (\`  )   | enclose\_with\_backtick()    |  code             | \`code\`                   | `code`             |
| Enclose with single dollar sign (`$`)  | enclose\_with\_dollar()      | equation^{inline} | ```$equation^{inline}$```  | $equation^{inline}$|
| Enclose with single dollar sign (`$$`) | enclose\_with\_dollar2()     | equation_{block}  | ```$$equation_{block}$$``` | $equation_{block}$ |
